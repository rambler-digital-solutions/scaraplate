
strategy: TemplateHash

testcases:
  - name: non_existing_target
    template: |
      from template!
    target: null
    out: |
      from template!

      # Generated by https://github.com/rambler-digital-solutions/scaraplate
      # From https://github.com/rambler-digital-solutions/scaraplate-example-template/commit/1111111111111111111111111111111111111111

  - name: existing_target_without_hash
    template: |
      from template!
    target: |
      from target!
    out: |
      from template!

      # Generated by https://github.com/rambler-digital-solutions/scaraplate
      # From https://github.com/rambler-digital-solutions/scaraplate-example-template/commit/1111111111111111111111111111111111111111

  - name: existing_target_with_current_hash
    template: |
      from template!
    target: |
      from target!

      # Generated by https://github.com/rambler-digital-solutions/scaraplate
      # From https://github.com/rambler-digital-solutions/scaraplate-example-template/commit/1111111111111111111111111111111111111111
    out: |
      from target!

      # Generated by https://github.com/rambler-digital-solutions/scaraplate
      # From https://github.com/rambler-digital-solutions/scaraplate-example-template/commit/1111111111111111111111111111111111111111

  - name: existing_target_with_different_hash
    template: |
      from template!
    target: |
      from target!

      # Generated by https://github.com/rambler-digital-solutions/scaraplate
      # From https://github.com/rambler-digital-solutions/scaraplate-example-template/commit/0000000000000000000000000000000000000000
    out: |
      from template!

      # Generated by https://github.com/rambler-digital-solutions/scaraplate
      # From https://github.com/rambler-digital-solutions/scaraplate-example-template/commit/1111111111111111111111111111111111111111

  - name: existing_target_with_current_hash_dirty
    template: |
      from template!
    target: |
      from target!

      # Generated by https://github.com/rambler-digital-solutions/scaraplate
      # From (dirty) https://github.com/rambler-digital-solutions/scaraplate-example-template/commit/1111111111111111111111111111111111111111
    is_git_dirty: True
    out: |
      from template!

      # Generated by https://github.com/rambler-digital-solutions/scaraplate
      # From (dirty) https://github.com/rambler-digital-solutions/scaraplate-example-template/commit/1111111111111111111111111111111111111111

  - name: non_existing_target_python
    template: |
      from template!
    target: null
    out: |
      from template!

      # Generated by https://github.com/rambler-digital-solutions/scaraplate
      # From https://github.com/rambler-digital-solutions/scaraplate-example-template/commit/1111111111111111111111111111111111111111  # noqa
    config:
      line_comment_start: '#'
      max_line_length: 87
      max_line_linter_ignore_mark: '  # noqa'

  - name: non_existing_target_groovy
    template: |
      from template!
    target: null
    out: |
      from template!

      // Generated by https://github.com/rambler-digital-solutions/scaraplate
      // From https://github.com/rambler-digital-solutions/scaraplate-example-template/commit/1111111111111111111111111111111111111111
    config:
      line_comment_start: '//'

  - name: existing_target_without_hash_with_mixed_newlines
    template: "\
      from template!\r"
    target: "
      from target!\r\n"
    out: "\
      from template!\r\n\
      \r\n\
      # Generated by https://github.com/rambler-digital-solutions/scaraplate\r\n\
      # From https://github.com/rambler-digital-solutions/scaraplate-example-template/commit/1111111111111111111111111111111111111111\r\n"

  - name: existing_target_without_hash_and_template_without_newlines
    template: "\
      from template!"
    target: "
      from target!\r\n"
    out: "\
      from template!\r\n\
      \r\n\
      # Generated by https://github.com/rambler-digital-solutions/scaraplate\r\n\
      # From https://github.com/rambler-digital-solutions/scaraplate-example-template/commit/1111111111111111111111111111111111111111\r\n"
